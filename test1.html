<!-- Modal for Creating a Formula Sheet -->
<div id="createSheetModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <h2>Create a Formula Sheet</h2>
      <form id="formulaSheetForm">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" placeholder="Enter sheet title..." required>
  
        <label for="description">Description:</label>
        <input type="text" id="description" name="description" placeholder="Enter a short description..." required>
  
        <label for="subjectFilter">Filter by Subject:</label>
        <div class="dropdown">
          <button type="button" class="dropbtn" onclick="toggleDropdown()">Select Subjects</button>
          <div id="dropdownContent" class="dropdown-content">
            
            <h2>------</h2>
            <label><input type="checkbox" name="subject" value="Math"> Math</label>
            <label><input type="checkbox" name="subject" value="Physics"> Physics</label>
            <label><input type="checkbox" name="subject" value="Chemistry"> Chemistry</label>
            <label><input type="checkbox" name="subject" value="Engineering"> Engineering</label>
            <label><input type="checkbox" name="subject" value="Biology"> Biology</label>
            <label><input type="checkbox" name="subject" value="KinesiologySportRecreation"> Kinesiology & Sports</label>
            <label><input type="checkbox" name="subject" value="Language"> Language</label>
            <label><input type="checkbox" name="subject" value="LinguisticsLiterature"> Linguistics & Literature</label>
            <label><input type="checkbox" name="subject" value="BusinessAccounting"> Business & Accounting</label>
            <label><input type="checkbox" name="subject" value="Agricultural"> Agricultural</label>
            <label><input type="checkbox" name="subject" value="MedicineAnatomy"> Medicine & Anatomy</label>
            <label><input type="checkbox" name="subject" value="AnimalScience"> Animal Science</label>
            <label><input type="checkbox" name="subject" value="FineArts"> Fine Arts</label>
            <label><input type="checkbox" name="subject" value="Law"> Law</label>
            <label><input type="checkbox" name="subject" value="Education"> Education</label>
            <label><input type="checkbox" name="subject" value="Humanities"> Humanities</label>
            <label><input type="checkbox" name="subject" value="SocialScience"> Social Science</label>
            <label><input type="checkbox" name="subject" value="HistoryClassicsReligion"> History & Classics </label>
          </div>
        </div>
  
        <label for="sortFilter">Sort By:</label>
        <select id="sortFilter" onchange="sortFormulas()">
          <option value="mostRecent">Most Recent</option>
          <option value="alphabetical">Alphabetical</option>
        </select>
  
        <label for="formula">Enter a Formula:</label>
        <input type="text" id="formulaInput" name="formula" placeholder="Type a formula...">
        <button type="button" onclick="addFormula()">Add Formula</button>
  
        <h3>Formulas:</h3>
        <ul id="formulaList"></ul>
      </form>
    </div>
  </div>
  
  <style>
    .dropdown {
      position: relative;
      display: inline-block;
    }
    .dropbtn {
      background-color: #3498db;
      color: white;
      padding: 10px;
      border: none;
      cursor: pointer;
    }
    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #f9f9f9;
      min-width: 200px;
      box-shadow: 0px 8px 16px rgba(0,0,0,0.2);
      padding: 10px;
      z-index: 1;
    }
    .dropdown-content label {
      display: block;
    }
    .dropdown-content input {
      margin-right: 5px;
    }
  </style>
  
  <script>
    function toggleDropdown() {
      document.getElementById("dropdownContent").style.display = 
        document.getElementById("dropdownContent").style.display === "block" ? "none" : "block";
    }
    
    window.onclick = function(event) {
      if (!event.target.matches('.dropbtn')) {
        document.getElementById("dropdownContent").style.display = "none";
      }
    };
  
    function sortFormulas() {
      let formulaList = document.getElementById("formulaList");
      let formulas = Array.from(formulaList.getElementsByTagName("li"));
      let sortType = document.getElementById("sortFilter").value;
      
      if (sortType === "alphabetical") {
        formulas.sort((a, b) => a.textContent.localeCompare(b.textContent));
      } else {
        formulas.reverse();
      }
      
      formulaList.innerHTML = "";
      formulas.forEach(formula => formulaList.appendChild(formula));
    }
  </script>